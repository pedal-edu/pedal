<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CAIT &mdash; Pedal 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=f2a433a1"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Source" href="source.html" />
    <link rel="prev" title="TIFA" href="tifa.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Pedal
              <img src="../../_static/pedal-logo-v3.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../everyone/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../everyone/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Teacher Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Teacher Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../reference.html">Teacher Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="core.html">Core Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="ffs.html">Feedback Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="formatter.html">Formatter</a></li>
<li class="toctree-l2"><a class="reference internal" href="tifa.html">TIFA</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">CAIT</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#list-of-pedal-data-types">List of Pedal Data Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#save-and-reference-variable">Save and reference variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reference-a-function-call">Reference a function call</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reference-a-function-definition">Reference a function definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#subtree-matching">Subtree matching</a></li>
<li class="toctree-l3"><a class="reference internal" href="#finding-data-types">Finding Data types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="source.html">Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="sandbox.html">Sandbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html">Assertions</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html">Pedal’s Type System</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../integrations.html">Autograder Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../practices.html">Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/ffs.html">Developers: Feedback Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/api.html">Developer API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/tools.html">Developer Tools Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/conventions.html">Internal Naming Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/libraries.html">Necessary Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/compilation.html">Compilation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../analysis.html">Researchers: Analyzing with Pedal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../everyone/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../everyone/contact.html">Contact</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Pedal</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../reference.html">Teacher Reference</a></li>
      <li class="breadcrumb-item active">CAIT</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/teachers/tools/cait.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="cait">
<h1>CAIT<a class="headerlink" href="#cait" title="Link to this heading"></a></h1>
<p>All the items in this guide may depend on one or more imports from the pedal package.
However, most of these should work with the following imports</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pedal.cait.cait_api</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>Note that you’ll need to run <a class="reference internal" href="tifa.html#tifa_analysis" title="tifa_analysis"><code class="xref py py-func docutils literal notranslate"><span class="pre">tifa_analysis()</span></code></a> prior to certain commands.</p>
<p>More often than not, you’ll want to use <code class="xref py py-obj docutils literal notranslate"><span class="pre">find_matches</span></code> as opposed to the <code class="xref py py-obj docutils literal notranslate"><span class="pre">find_match</span></code> command
used in this quick reference guide. The <code class="xref py py-obj docutils literal notranslate"><span class="pre">find_match</span></code> function is used for brevity, but typically
you’ll use the following pattern</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">matches</span> <span class="o">=</span> <span class="n">find_matches</span><span class="p">(</span><span class="s2">&quot;#instructor code&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">:</span>
<span class="c1"># do something</span>
</pre></div>
</div>
<p>Also note that many of these items return a CaitNode; CaitNodes should mirror the built-in
ast_node class except with added fields or functionality. In general it should be easier to work
with CaitNodes as many additional operations and matching functionality are supported with CaitNodes.</p>
<section id="list-of-pedal-data-types">
<h2>List of Pedal Data Types<a class="headerlink" href="#list-of-pedal-data-types" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>BoolType</p></li>
<li><p>DictType</p></li>
<li><p>FunctionType</p></li>
<li><p>LiteralBool</p></li>
<li><p>LiteralNone</p></li>
<li><p>LiteralNum</p></li>
<li><p>LiteralStr</p></li>
<li><p>NoneType</p></li>
<li><p>NumType</p></li>
<li><p>StrType</p></li>
<li><p>TupleType</p></li>
<li><p>UnknownType</p></li>
</ul>
</section>
<section id="save-and-reference-variable">
<h2>Save and reference variable<a class="headerlink" href="#save-and-reference-variable" title="Link to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">match</span> <span class="o">=</span> <span class="n">find_match</span><span class="p">(</span><span class="s2">&quot;_var_ = ___ + _var_&quot;</span><span class="p">)</span>
<span class="n">student_var</span> <span class="o">=</span> <span class="n">match</span><span class="p">[</span><span class="s1">&#39;_var_&#39;</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="reference-a-function-call">
<h2>Reference a function call<a class="headerlink" href="#reference-a-function-call" title="Link to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">match</span> <span class="o">=</span> <span class="n">find_match</span><span class="p">(</span><span class="s2">&quot;_var_ = _function_()&quot;</span><span class="p">)</span>
<span class="n">student_func_call</span> <span class="o">=</span> <span class="n">match</span><span class="p">[</span><span class="s1">&#39;_function_&#39;</span><span class="p">]</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">student_func_call</span><span class="o">.</span><span class="n">args</span> <span class="c1">#access list of arguments as CaitNodes</span>
<span class="n">keywords</span> <span class="o">=</span> <span class="n">student_func_call</span><span class="o">.</span><span class="n">keywords</span> <span class="c1">#access keyword arguments as CaitNodes</span>
</pre></div>
</div>
</section>
<section id="reference-a-function-definition">
<h2>Reference a function definition<a class="headerlink" href="#reference-a-function-definition" title="Link to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">match</span> <span class="o">=</span> <span class="n">find_match</span><span class="p">(</span><span class="s2">&quot;def _my_func_():</span><span class="se">\n</span><span class="s2">&quot;</span>
                   <span class="s2">&quot;    pass</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">student_func_def</span> <span class="o">=</span> <span class="n">match</span><span class="p">[</span><span class="s1">&#39;_my_func_&#39;</span><span class="p">]</span> <span class="c1"># root node of function definition</span>
</pre></div>
</div>
<p>Note that by modifying this example, you can also check to see if the function is called, e.g.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">match</span> <span class="o">=</span> <span class="n">find_match</span><span class="p">(</span><span class="s2">&quot;def _my_func_():</span><span class="se">\n</span><span class="s2">&quot;</span>
                   <span class="s2">&quot;    pass</span><span class="se">\n</span><span class="s2">&quot;</span>
                   <span class="s2">&quot;_my_func_()&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">match</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">gently</span><span class="p">(</span><span class="s2">&quot;You haven&#39;t defined a function and used the function you defined!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>will look for a function definition followed by the usage of the function as
an ast sibling (so same indentation level as definition</p>
</section>
<section id="subtree-matching">
<h2>Subtree matching<a class="headerlink" href="#subtree-matching" title="Link to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">match</span> <span class="o">=</span> <span class="n">find_match</span><span class="p">(</span><span class="s2">&quot;for _item_ in _list_:</span><span class="se">\n</span><span class="s2">&quot;</span>
                   <span class="s2">&quot;    __exp__&quot;</span><span class="p">)</span>
<span class="k">match</span><span class="p">[</span><span class="s1">&#39;__exp__&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find_match</span><span class="p">(</span><span class="s2">&quot;# whatever submatch&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Normally CAIT will match to direct siblings. By using an expression, you can
instead search everything contained in the body of the for loop, or other ast
child nodes (see tutorial). Note that __exp__ here will match to the first line in the body. To search the ENTIRE body, you will need to get the parent of __exp__ like in the example above</p>
</section>
<section id="finding-data-types">
<h2>Finding Data types<a class="headerlink" href="#finding-data-types" title="Link to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pedal.tifa.type_definitions</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">match</span> <span class="o">=</span> <span class="n">find_match</span><span class="p">(</span><span class="s2">&quot;for _item_ in _list_:</span><span class="se">\n</span><span class="s2">&quot;</span>
                   <span class="s2">&quot;    _sum_ = _sum_ + _item_&quot;</span><span class="p">)</span>
<span class="n">data_type</span> <span class="o">=</span> <span class="n">match</span><span class="p">[</span><span class="s1">&#39;_sum_&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_data_type</span><span class="p">()</span>
<span class="nb">type</span><span class="p">(</span><span class="n">data_type</span><span class="p">)</span> <span class="o">==</span> <span class="n">NumType</span> <span class="c1"># checks if it the last type it took on</span>

<span class="n">data_state</span> <span class="o">=</span> <span class="n">match</span><span class="p">[</span><span class="s1">&#39;_sum_&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_data_state</span><span class="p">()</span>
<span class="n">data_state</span><span class="o">.</span><span class="n">was_type</span><span class="p">(</span><span class="s1">&#39;NumType&#39;</span><span class="p">)</span> <span class="c1"># checks if _sum_ was a number at some point</span>
<span class="n">data_state</span><span class="o">.</span><span class="n">was_type</span><span class="p">(</span><span class="n">NumType</span><span class="p">)</span>   <span class="c1"># equivalent to previous line</span>
<span class="n">data_state</span><span class="o">.</span><span class="n">was_type</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>       <span class="c1"># equivalent to previous line</span>

<span class="k">match</span><span class="p">[</span><span class="s1">&#39;_sum_&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">was_type</span><span class="p">(</span><span class="s1">&#39;NumType&#39;</span><span class="p">)</span> <span class="c1"># If you&#39;re only doing one access, you can use this</span>
</pre></div>
</div>
<p>If you want to explore the data types yourself, recursively access the <a class="reference external" href="https://docs.python.org/3/library/trace.html#module-trace" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">trace</span></code></a> (a list of <code class="xref py py-obj docutils literal notranslate"><span class="pre">State</span></code> objects) attribute of data_state and check each state’s <a class="reference external" href="https://docs.python.org/3/library/functions.html#type" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">type</span></code></a> attribute. For example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pedal.types.definitions</span> <span class="kn">import</span> <span class="o">*</span>
<span class="sd">&#39;&#39;&#39;# Student Source Code</span>
<span class="sd">var = 14</span>
<span class="sd">var = &#39;String&#39;</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="n">match</span> <span class="o">=</span> <span class="n">find_match</span><span class="p">(</span><span class="s2">&quot;_var_ = ___</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">data_state</span> <span class="o">=</span> <span class="n">match</span><span class="p">[</span><span class="s1">&#39;_var_&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_data_state</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">print_types</span><span class="p">(</span><span class="n">data_state</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data_state</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data_state</span><span class="o">.</span><span class="n">trace</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">print_types</span><span class="p">(</span><span class="n">data_state</span><span class="o">.</span><span class="n">trace</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">print_types</span><span class="p">(</span><span class="n">data_state</span><span class="p">)</span>
<span class="sd">&#39;&#39;&#39;#Output</span>
<span class="sd">StrType</span>
<span class="sd">NumType</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tifa.html" class="btn btn-neutral float-left" title="TIFA" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="source.html" class="btn btn-neutral float-right" title="Source" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, acbart, lukesg08.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>