<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Teacher Examples &mdash; Pedal 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=f2a433a1"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Teacher Reference" href="reference.html" />
    <link rel="prev" title="Teacher Quick Start Guide" href="quickstart.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Pedal
              <img src="../_static/pedal-logo-v3.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../everyone/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../everyone/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Teacher Quick Start Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Teacher Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#basic-arithmetic-question">Basic Arithmetic Question</a></li>
<li class="toctree-l2"><a class="reference internal" href="#basic-function-call-question">Basic Function Call Question</a></li>
<li class="toctree-l2"><a class="reference internal" href="#student-defined-function">Student Defined Function</a></li>
<li class="toctree-l2"><a class="reference internal" href="#complex-question">Complex Question</a></li>
<li class="toctree-l2"><a class="reference internal" href="#medium-project">Medium Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#large-project">Large Project</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Teacher Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="integrations.html">Autograder Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="practices.html">Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/ffs.html">Developers: Feedback Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/api.html">Developer API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/tools.html">Developer Tools Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/conventions.html">Internal Naming Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/libraries.html">Necessary Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/compilation.html">Compilation</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysis.html">Researchers: Analyzing with Pedal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../everyone/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../everyone/contact.html">Contact</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Pedal</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Teacher Examples</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/teachers/examples.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="teacher-examples">
<span id="examples"></span><h1>Teacher Examples<a class="headerlink" href="#teacher-examples" title="Link to this heading"></a></h1>
<p>This document goes over some common scenarios that you might have. Or more accurately right now, it’s showing off
some random examples I grabbed from our courses.</p>
<section id="basic-arithmetic-question">
<h2>Basic Arithmetic Question<a class="headerlink" href="#basic-arithmetic-question" title="Link to this heading"></a></h2>
<p>Instructions:</p>
<blockquote>
<div><p>Using the + operator, print out the result of 7+3. Do not embed the result
in your code. Let Python do the calculation for you.</p>
</div></blockquote>
<p>Correct answer:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">student.py</span><a class="headerlink" href="#id1" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="mi">7</span><span class="o">+</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Instructor grading code:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">grade_assignment.py</span><a class="headerlink" href="#id2" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pedal</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># Make sure they don&#39;t embed the answer</span>
<span class="n">prevent_literal</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="c1"># Make sure they DO use these integers</span>
<span class="n">ensure_literal</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="n">ensure_literal</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="c1"># Make sure they print</span>
<span class="n">ensure_function_call</span><span class="p">(</span><span class="s1">&#39;print&#39;</span><span class="p">)</span>
<span class="c1"># Make sure they used addition operator</span>
<span class="n">ensure_operation</span><span class="p">(</span><span class="s2">&quot;+&quot;</span><span class="p">)</span>
<span class="c1"># Give message if they try to use strings instead of numbers</span>
<span class="n">prevent_ast</span><span class="p">(</span><span class="s2">&quot;Str&quot;</span><span class="p">)</span>
<span class="c1"># Check the actual output</span>
<span class="n">assert_output</span><span class="p">(</span><span class="n">student</span><span class="p">,</span> <span class="s2">&quot;7&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="basic-function-call-question">
<h2>Basic Function Call Question<a class="headerlink" href="#basic-function-call-question" title="Link to this heading"></a></h2>
<p>Here’s a random simple example grading script for a problem where students use the <a class="reference external" href="https://docs.python.org/3/library/functions.html#round" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">round</span></code></a> function to convert a
dollar amount stored as a string literal without a dollar sign, and then print the result. It’s trivial, but we
do use it in one of courses.</p>
<p>Instructions:</p>
<blockquote>
<div><p>The function <a class="reference external" href="https://docs.python.org/3/library/functions.html#round" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">round</span></code></a> consumes a float number and returns it rounded to
the nearest whole number. You are buying some food and want to know
roughly how much it will cost. Use the round function to
round $9.50 to the nearest whole number.</p>
</div></blockquote>
<p>Student answer:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">student.py</span><a class="headerlink" href="#id3" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">9.5</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>Instructor control script:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">grade_assignment.py</span><a class="headerlink" href="#id4" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pedal</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># Common mistake is that students put a $ in their code</span>
<span class="k">if</span> <span class="s2">&quot;$&quot;</span> <span class="ow">in</span> <span class="n">get_program</span><span class="p">():</span>
    <span class="n">explain</span><span class="p">(</span><span class="s2">&quot;You should not use the dollar sign ($) anywhere in your code!&quot;</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Do Not Use Dollar Sign&quot;</span>
            <span class="n">priority</span><span class="o">=</span><span class="s1">&#39;syntax&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;used_dollar_sign&quot;</span><span class="p">)</span>

<span class="c1"># They must call the round function</span>
<span class="n">ensure_function_call</span><span class="p">(</span><span class="s1">&#39;round&#39;</span><span class="p">)</span>
<span class="c1"># They must call the print function</span>
<span class="n">ensure_function_call</span><span class="p">(</span><span class="s1">&#39;print&#39;</span><span class="p">)</span>
<span class="c1"># They must have the float value 9.5 in their code</span>
<span class="n">ensure_literal</span><span class="p">(</span><span class="mf">9.5</span><span class="p">)</span>
<span class="c1"># They can only have one number in their code</span>
<span class="n">prevent_ast</span><span class="p">(</span><span class="s2">&quot;Num&quot;</span><span class="p">,</span> <span class="n">at_most</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># They cannot have any strings embedded in their code.</span>
<span class="n">prevent_ast</span><span class="p">(</span><span class="s2">&quot;Str&quot;</span><span class="p">)</span>
<span class="c1"># Check that the output is correct</span>
<span class="n">assert_output</span><span class="p">(</span><span class="n">student</span><span class="p">,</span> <span class="s2">&quot;10&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="student-defined-function">
<h2>Student Defined Function<a class="headerlink" href="#student-defined-function" title="Link to this heading"></a></h2>
<p>Instructions:</p>
<blockquote>
<div><p>Create a function named <code class="xref py py-obj docutils literal notranslate"><span class="pre">add_3</span></code> that takes in three integers and returns
their sum. Make sure you unit test the function a suitable number of times!</p>
</div></blockquote>
<p>Student Answer:</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">student.py</span><a class="headerlink" href="#id5" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add_3</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">+</span><span class="n">c</span>

<span class="c1"># You might use a different unittest style!</span>
<span class="k">assert</span> <span class="n">add_3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span>
<span class="k">assert</span> <span class="n">add_3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
<span class="k">assert</span> <span class="n">add_3</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<p>Instructor Control Script:</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">grade_assignment.py</span><a class="headerlink" href="#id6" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pedal</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">ensure_function</span><span class="p">(</span><span class="s1">&#39;add_3&#39;</span><span class="p">,</span> <span class="n">arity</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="c1"># Or if you teach them to annotate their parameters/returns</span>
<span class="c1"># ensure_function(&#39;add_3&#39;, parameters=[int,int,int], returns=int)</span>
<span class="c1"># Did they write at least three tests?</span>
<span class="n">ensure_function_call</span><span class="p">(</span><span class="s1">&#39;add_3&#39;</span><span class="p">,</span> <span class="n">at_least</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">ensure_ast</span><span class="p">(</span><span class="s2">&quot;Assert&quot;</span><span class="p">,</span> <span class="n">at_least</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="c1"># Use coverage module to check their code coverage</span>
<span class="n">ensure_coverage</span><span class="p">(</span><span class="mf">.9</span><span class="p">)</span>
<span class="c1"># Actually unit test their result</span>
<span class="n">unit_test</span><span class="p">(</span><span class="s2">&quot;add_3&quot;</span><span class="p">,</span> <span class="p">[</span>
    <span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="mi">6</span><span class="p">),</span>
    <span class="p">([</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="mi">2</span><span class="p">),</span>
    <span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">),</span>
    <span class="p">([</span><span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">])</span>
</pre></div>
</div>
</div>
</section>
<section id="complex-question">
<h2>Complex Question<a class="headerlink" href="#complex-question" title="Link to this heading"></a></h2>
<p>Here’s a much more sophisicated problem where they have to read open two files and mangle their contents to
make MadLibs.</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">grade_assignment.py</span><a class="headerlink" href="#id7" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">suppress</span><span class="p">(</span><span class="s2">&quot;analyzer&quot;</span><span class="p">,</span> <span class="s2">&quot;Iterating over non-list&quot;</span><span class="p">)</span>
<span class="n">suppress</span><span class="p">(</span><span class="s2">&quot;analyzer&quot;</span><span class="p">,</span> <span class="s2">&quot;Iterating over empty list&quot;</span><span class="p">)</span>

<span class="n">words_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;words.txt&quot;</span><span class="p">)</span>
<span class="n">story_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;story.txt&quot;</span><span class="p">)</span>
<span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="n">w</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words_file</span><span class="p">]</span>
<span class="n">story</span> <span class="o">=</span> <span class="p">[</span><span class="n">l</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">story_file</span><span class="p">]</span>
<span class="n">correct_story</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">story</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="s1">&#39;____&#39;</span><span class="p">)</span>
    <span class="n">correct_story</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">get_output</span><span class="p">()</span>

<span class="k">if</span> <span class="n">find_match</span><span class="p">(</span><span class="s1">&#39;___.strip()&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">find_match</span><span class="p">(</span><span class="s1">&#39;___.replace()&#39;</span><span class="p">):</span>
    <span class="n">gently</span><span class="p">(</span><span class="s2">&quot;Remember! You cannot modify a string directly. Instead, you should assign the result back to the string variable.&quot;</span><span class="p">)</span>

<span class="n">prevent_ast</span><span class="p">(</span><span class="s2">&quot;If&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;You do not need any &lt;code&gt;if&lt;/code&gt; statements. The &lt;code&gt;replace&lt;/code&gt; method works regardless of whether the text contains the string.&quot;</span><span class="p">)</span>

<span class="n">ensure_function_call</span><span class="p">(</span><span class="s2">&quot;replace&quot;</span><span class="p">)</span>
<span class="n">assert_output</span><span class="p">(</span><span class="n">student</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">correct_story</span><span class="p">))</span>
<span class="n">ensure_ast</span><span class="p">(</span><span class="s2">&quot;For&quot;</span><span class="p">,</span> <span class="n">at_least</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">prevent_ast</span><span class="p">(</span><span class="s2">&quot;For&quot;</span><span class="p">,</span> <span class="n">at_most</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">prevent_function_call</span><span class="p">(</span><span class="s2">&quot;read&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;You should not use the built-in &lt;code&gt;read&lt;/code&gt; method.&quot;</span><span class="p">)</span>
<span class="n">prevent_function_call</span><span class="p">(</span><span class="s2">&quot;readlines&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;You should not use the built-in &lt;code&gt;readlines&lt;/code&gt; method.&quot;</span><span class="p">)</span>

<span class="c1"># Note how we can mute and unscore a feedback function</span>
<span class="c1"># Now we can use it as a check without producing feedback!</span>
<span class="n">stripping</span> <span class="o">=</span> <span class="n">ensure_function_call</span><span class="p">(</span><span class="s1">&#39;strip&#39;</span><span class="p">,</span> <span class="n">muted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">unscored</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">rstripping</span> <span class="o">=</span> <span class="n">ensure_function_call</span><span class="p">(</span><span class="s1">&#39;rstrip&#39;</span><span class="p">,</span> <span class="n">muted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">unscored</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">stripping</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">rstripping</span><span class="p">:</span>
    <span class="n">gently</span><span class="p">(</span><span class="s2">&quot;Make sure you are stripping the new lines before you print!&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="medium-project">
<h2>Medium Project<a class="headerlink" href="#medium-project" title="Link to this heading"></a></h2>
<p>The following project had students write a function to compare two string dates and determine which one
was earlier. In order to do so, they had to complete a number of helper functions along the way.</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">grade_assignment.py</span><a class="headerlink" href="#id8" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Instructor control script for Project- Dates and Times</span>

<span class="sd">@author: acbart</span>
<span class="sd">@requires: pedal</span>
<span class="sd">@title: Project- Dates and Times- Control Script</span>
<span class="sd">@version: 9/6/2020 12:38pm</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">__version__</span> <span class="o">=</span> <span class="mi">1</span>

<span class="kn">from</span> <span class="nn">pedal</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">curriculum_sneks</span> <span class="kn">import</span> <span class="n">ensure_functions_return</span><span class="p">,</span> <span class="n">prevent_printing_functions</span>
<span class="kn">from</span> <span class="nn">curriculum_sneks.tests</span> <span class="kn">import</span> <span class="n">ensure_cisc108_tests</span>


<span class="n">prevent_import</span><span class="p">(</span><span class="s1">&#39;re&#39;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Using Regular Expressions would be a good idea.&quot;</span>
                             <span class="s2">&quot; But no, you may not use them here.&quot;</span><span class="p">,</span>
               <span class="n">label</span><span class="o">=</span><span class="s2">&quot;imported_re&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;No Regular Expressions&quot;</span><span class="p">)</span>
<span class="n">prevent_import</span><span class="p">(</span><span class="s1">&#39;datetime&#39;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;No using the built-in `datetime` module!&quot;</span><span class="p">,</span>
               <span class="n">label</span><span class="o">=</span><span class="s2">&quot;imported_datetime&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;No Datetime Module&quot;</span><span class="p">)</span>
<span class="n">prevent_import</span><span class="p">(</span><span class="s1">&#39;arrow&#39;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;No using the fancy `arrow` module!&quot;</span><span class="p">,</span>
               <span class="n">label</span><span class="o">=</span><span class="s2">&quot;imported_arrow&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;No Arrow Module&quot;</span><span class="p">)</span>
<span class="n">prevent_import</span><span class="p">(</span><span class="s1">&#39;pandas&#39;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Wow, okay, no super can&#39;t use `pandas`.&quot;</span><span class="p">,</span>
               <span class="n">label</span><span class="o">=</span><span class="s2">&quot;imported_pandas&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;No Pandas&quot;</span><span class="p">)</span>
<span class="n">ensure_import</span><span class="p">(</span><span class="s1">&#39;cisc108&#39;</span><span class="p">)</span>

<span class="n">prevent_ast</span><span class="p">(</span><span class="s1">&#39;Try&#39;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot; I noticed you used a Try/Except block. It&#39;s great that&quot;</span>
                           <span class="s2">&quot; you found another way, but we&#39;d appreciate it if you&quot;</span>
                           <span class="s2">&quot; used this project to practice IF statements and string&quot;</span>
                           <span class="s2">&quot; indexing.&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;used_try&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Do Not Use Try/Except&quot;</span><span class="p">)</span>

<span class="n">prevent_printing_functions</span><span class="p">()</span>
<span class="n">ensure_functions_return</span><span class="p">()</span>

<span class="k">if</span> <span class="n">ensure_coverage</span><span class="p">(</span><span class="mf">.8</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="s1">&#39;lowest&#39;</span><span class="p">):</span>
    <span class="n">compliment</span><span class="p">(</span><span class="s2">&quot;Good unit test coverage so far&quot;</span><span class="p">,</span>
               <span class="n">label</span><span class="o">=</span><span class="s2">&quot;good_coverage_so_far&quot;</span><span class="p">)</span>

<span class="n">ensure_function</span><span class="p">(</span><span class="s1">&#39;parse_date_month&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">returns</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">ensure_function_call</span><span class="p">(</span><span class="s1">&#39;parse_date_month&#39;</span><span class="p">,</span> <span class="n">at_least</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                     <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Write at least 4 unit tests for `parse_date_month` please.&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">unit_test</span><span class="p">(</span><span class="s1">&#39;parse_date_month&#39;</span><span class="p">,</span>
              <span class="p">([</span><span class="s2">&quot;1/1/2020&quot;</span><span class="p">],</span> <span class="mi">1</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;5/12/2020&quot;</span><span class="p">],</span> <span class="mi">5</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;10/9/1998&quot;</span><span class="p">],</span> <span class="mi">10</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;11/30/2010&quot;</span><span class="p">],</span> <span class="mi">11</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;10/30/15&quot;</span><span class="p">],</span> <span class="mi">10</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;01/2/05&quot;</span><span class="p">],</span> <span class="mi">1</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;12/31/9999&quot;</span><span class="p">],</span> <span class="mi">12</span><span class="p">),</span>
              <span class="c1">#([&quot;1/32/2013&quot;], 1),</span>
              <span class="p">([</span><span class="s2">&quot;13/32/2013&quot;</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;13/1/2013&quot;</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;Newark, DE&quot;</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;0/0/0000&quot;</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
             <span class="p">):</span>
    <span class="n">compliment</span><span class="p">(</span><span class="s2">&quot;Finished parse_date_month!&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;done_parse_date_month&quot;</span><span class="p">)</span>


<span class="n">ensure_function</span><span class="p">(</span><span class="s1">&#39;parse_date_day&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">returns</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">ensure_function_call</span><span class="p">(</span><span class="s1">&#39;parse_date_day&#39;</span><span class="p">,</span> <span class="n">at_least</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                     <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Write at least 4 unit tests for `parse_date_day` please.&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">unit_test</span><span class="p">(</span><span class="s1">&#39;parse_date_day&#39;</span><span class="p">,</span>
              <span class="p">([</span><span class="s2">&quot;1/1/2020&quot;</span><span class="p">],</span> <span class="mi">1</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;5/12/2020&quot;</span><span class="p">],</span> <span class="mi">12</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;10/9/1998&quot;</span><span class="p">],</span> <span class="mi">9</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;11/30/2010&quot;</span><span class="p">],</span> <span class="mi">30</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;10/31/15&quot;</span><span class="p">],</span> <span class="mi">31</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;01/2/05&quot;</span><span class="p">],</span> <span class="mi">2</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;12/31/9999&quot;</span><span class="p">],</span> <span class="mi">31</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;13/32/2013&quot;</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;1/32/2013&quot;</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;0/0/0000&quot;</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
              <span class="p">):</span>
    <span class="n">compliment</span><span class="p">(</span><span class="s2">&quot;Finished parse_date_day!&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;done_parse_date_day&quot;</span><span class="p">)</span>

<span class="n">ensure_function</span><span class="p">(</span><span class="s1">&#39;parse_date_year&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">returns</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">ensure_function_call</span><span class="p">(</span><span class="s1">&#39;parse_date_year&#39;</span><span class="p">,</span> <span class="n">at_least</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                     <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Write at least 4 unit tests for `parse_date_year` please.&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">unit_test</span><span class="p">(</span><span class="s1">&#39;parse_date_year&#39;</span><span class="p">,</span>
              <span class="p">([</span><span class="s2">&quot;1/1/2020&quot;</span><span class="p">],</span> <span class="mi">2020</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;5/12/2021&quot;</span><span class="p">],</span> <span class="mi">2021</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;10/9/1998&quot;</span><span class="p">],</span> <span class="mi">1998</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;11/30/2010&quot;</span><span class="p">],</span> <span class="mi">2010</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;10/31/15&quot;</span><span class="p">],</span> <span class="mi">2015</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;01/2/05&quot;</span><span class="p">],</span> <span class="mi">2005</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;12/31/9999&quot;</span><span class="p">],</span> <span class="mi">9999</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;13/32/013&quot;</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;1/32/3&quot;</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;0/0/&quot;</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
              <span class="p">):</span>
    <span class="n">compliment</span><span class="p">(</span><span class="s2">&quot;Finished parse_date_year!&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;done_parse_date_year&quot;</span><span class="p">)</span>

<span class="n">ensure_function</span><span class="p">(</span><span class="s1">&#39;is_date&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">returns</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
<span class="n">ensure_function_call</span><span class="p">(</span><span class="s1">&#39;is_date&#39;</span><span class="p">,</span> <span class="n">at_least</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                     <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Write at least 4 unit tests for `is_date` please.&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">unit_test</span><span class="p">(</span><span class="s1">&#39;is_date&#39;</span><span class="p">,</span>
              <span class="p">([</span><span class="s2">&quot;1/1/2020&quot;</span><span class="p">],</span> <span class="kc">True</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;5/12/2020&quot;</span><span class="p">],</span> <span class="kc">True</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;10/9/1998&quot;</span><span class="p">],</span> <span class="kc">True</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;11/30/2010&quot;</span><span class="p">],</span> <span class="kc">True</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;10/31/15&quot;</span><span class="p">],</span> <span class="kc">True</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;01/2/05&quot;</span><span class="p">],</span> <span class="kc">True</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;12/31/9999&quot;</span><span class="p">],</span> <span class="kc">True</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;13/32/2013&quot;</span><span class="p">],</span> <span class="kc">False</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;13/2/2013&quot;</span><span class="p">],</span> <span class="kc">False</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;1/2/201&quot;</span><span class="p">],</span> <span class="kc">False</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;1/2/3&quot;</span><span class="p">],</span> <span class="kc">False</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;1/32/2013&quot;</span><span class="p">],</span> <span class="kc">False</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;0/0/0000&quot;</span><span class="p">],</span> <span class="kc">False</span><span class="p">),</span>
              <span class="p">):</span>
    <span class="n">compliment</span><span class="p">(</span><span class="s2">&quot;Finished is_date!&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;done_is_date&quot;</span><span class="p">)</span>

<span class="n">ensure_function</span><span class="p">(</span><span class="s1">&#39;earlier&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">returns</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
<span class="n">ensure_function_call</span><span class="p">(</span><span class="s1">&#39;earlier&#39;</span><span class="p">,</span> <span class="n">at_least</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                     <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Write at least 4 unit tests for `earlier` please.&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">unit_test</span><span class="p">(</span><span class="s1">&#39;earlier&#39;</span><span class="p">,</span>
              <span class="c1"># Same</span>
              <span class="p">([</span><span class="s2">&quot;1/1/2020&quot;</span><span class="p">,</span> <span class="s2">&quot;1/1/2020&quot;</span><span class="p">],</span> <span class="s2">&quot;equal&quot;</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;5/12/2020&quot;</span><span class="p">,</span> <span class="s2">&quot;05/12/2020&quot;</span><span class="p">],</span> <span class="s2">&quot;equal&quot;</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;10/9/1998&quot;</span><span class="p">,</span> <span class="s2">&quot;10/9/1998&quot;</span><span class="p">],</span> <span class="s2">&quot;equal&quot;</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;11/30/2010&quot;</span><span class="p">,</span> <span class="s2">&quot;11/30/10&quot;</span><span class="p">],</span> <span class="s2">&quot;equal&quot;</span><span class="p">),</span>
              <span class="c1"># Simple cases</span>
              <span class="p">([</span><span class="s2">&quot;11/30/2010&quot;</span><span class="p">,</span> <span class="s2">&quot;11/31/2010&quot;</span><span class="p">],</span> <span class="s2">&quot;11/30/2010&quot;</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;11/30/2010&quot;</span><span class="p">,</span> <span class="s2">&quot;11/29/2010&quot;</span><span class="p">],</span> <span class="s2">&quot;11/29/2010&quot;</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;10/3/2020&quot;</span><span class="p">,</span> <span class="s2">&quot;10/4/2020&quot;</span><span class="p">],</span> <span class="s2">&quot;10/3/2020&quot;</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;10/3/2020&quot;</span><span class="p">,</span> <span class="s2">&quot;10/2/2020&quot;</span><span class="p">],</span> <span class="s2">&quot;10/2/2020&quot;</span><span class="p">),</span>
              <span class="c1"># Complex failures</span>
              <span class="p">([</span><span class="s2">&quot;10/3/2020&quot;</span><span class="p">,</span> <span class="s2">&quot;10/20/2020&quot;</span><span class="p">],</span> <span class="s2">&quot;10/3/2020&quot;</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;2/2/2020&quot;</span><span class="p">,</span> <span class="s2">&quot;10/10/2020&quot;</span><span class="p">],</span> <span class="s2">&quot;2/2/2020&quot;</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;10/2/2020&quot;</span><span class="p">,</span> <span class="s2">&quot;10/10/2020&quot;</span><span class="p">],</span> <span class="s2">&quot;10/2/2020&quot;</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;12/1/2019&quot;</span><span class="p">,</span> <span class="s2">&quot;1/1/2020&quot;</span><span class="p">],</span> <span class="s2">&quot;12/1/2019&quot;</span><span class="p">),</span>
              <span class="c1"># Errors</span>
              <span class="p">([</span><span class="s2">&quot;1/2/3&quot;</span><span class="p">,</span> <span class="s2">&quot;1/32/2013&quot;</span><span class="p">],</span> <span class="s2">&quot;error&quot;</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;1/32/2013&quot;</span><span class="p">,</span> <span class="s2">&quot;1/2/3000&quot;</span><span class="p">],</span> <span class="s2">&quot;error&quot;</span><span class="p">),</span>
              <span class="p">([</span><span class="s2">&quot;1/2/3000&quot;</span><span class="p">,</span> <span class="s2">&quot;1/32/2013&quot;</span><span class="p">],</span> <span class="s2">&quot;error&quot;</span><span class="p">)</span>
              <span class="p">):</span>
    <span class="n">compliment</span><span class="p">(</span><span class="s2">&quot;Finished earlier!&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;done_earlier&quot;</span><span class="p">)</span>


<span class="n">ensure_documented_functions</span><span class="p">()</span>
<span class="n">ensure_cisc108_tests</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="large-project">
<h2>Large Project<a class="headerlink" href="#large-project" title="Link to this heading"></a></h2>
<p>The following code is a long example of a real project that we’ve created using Pedal.
This is Pedal version 2, however the version 3 code will look different.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is out of date for Pedal version 3!</p>
</div>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">grade_assignment.py</span><a class="headerlink" href="#id9" title="Link to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Instructor control script for Project 5- Text Adventure Beta</span>

<span class="sd">@author: acbart</span>
<span class="sd">@requires: pedal</span>
<span class="sd">@title: Project 5- Text Adventure- Control Script</span>
<span class="sd">@version: 4/4/2019 10:29am</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="mi">1</span>

<span class="kn">from</span> <span class="nn">pedal.resolvers.simple</span> <span class="kn">import</span> <span class="n">resolve</span>
<span class="kn">from</span> <span class="nn">pedal</span> <span class="kn">import</span> <span class="p">(</span><span class="n">explain</span><span class="p">,</span> <span class="n">contextualize_report</span><span class="p">,</span> <span class="n">set_success</span><span class="p">,</span> <span class="n">give_partial</span><span class="p">,</span>
                   <span class="n">compliment</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">pedal.sandbox</span> <span class="kn">import</span> <span class="n">run</span>
<span class="kn">from</span> <span class="nn">pedal.assertions.organizers</span> <span class="kn">import</span> <span class="n">phase</span><span class="p">,</span> <span class="n">postcondition</span><span class="p">,</span> <span class="n">precondition</span>
<span class="kn">from</span> <span class="nn">pedal.assertions.setup</span> <span class="kn">import</span> <span class="n">resolve_all</span><span class="p">,</span> <span class="n">set_assertion_mode</span>
<span class="kn">from</span> <span class="nn">pedal.assertions.assertions</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pedal.toolkit.imports</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pedal.toolkit.utilities</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pedal.toolkit.functions</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pedal.toolkit.signatures</span> <span class="kn">import</span> <span class="n">function_signature</span>
<span class="kn">from</span> <span class="nn">pedal.sandbox.mocked</span> <span class="kn">import</span> <span class="n">disabled_builtin</span><span class="p">,</span> <span class="n">MockPedal</span><span class="p">,</span> <span class="n">BlockedModule</span>
<span class="kn">from</span> <span class="nn">pedal.cait</span> <span class="kn">import</span> <span class="n">parse_program</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">pedal.environments</span> <span class="kn">import</span> <span class="n">setup_pedal</span>

<span class="n">set_assertion_mode</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

<span class="n">ast</span><span class="p">,</span> <span class="n">student</span><span class="p">,</span> <span class="n">resolver</span> <span class="o">=</span> <span class="n">setup_pedal</span><span class="p">(</span><span class="n">skip_tifa</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Start with some sanity checks</span>

<span class="n">sanity</span> <span class="o">=</span> <span class="n">student</span><span class="o">.</span><span class="n">exception</span> <span class="ow">is</span> <span class="kc">None</span>

<span class="n">assertGenerally</span><span class="p">(</span><span class="ow">not</span> <span class="n">ensure_imports</span><span class="p">(</span><span class="s1">&#39;cisc108&#39;</span><span class="p">))</span>

<span class="c1"># Is there a triple quoted top-level string that starts with Records:?</span>
<span class="c1"># All functions defined? Documented? Covered?</span>

<span class="c1"># render_introduction() -&gt; string</span>
<span class="c1"># create_world() -&gt; dict</span>
<span class="c1"># render(world) -&gt; str</span>
<span class="c1"># get_options(world) -&gt; list[str]</span>
<span class="c1"># update(world, command) -&gt; str</span>
<span class="c1"># render_ending(world) -&gt; str</span>
<span class="c1"># choose(list[str]) -&gt; str</span>

<span class="c1"># WIN_PATH</span>
<span class="c1"># LOSE_PATH</span>
<span class="c1"># Can we play through the given paths and win/lose/quit them?</span>

<span class="n">FUNCTION_VALUE</span> <span class="o">=</span> <span class="mi">2</span>

<span class="nd">@phase</span><span class="p">(</span><span class="s2">&quot;records&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">grade_records</span><span class="p">():</span>
    <span class="n">body</span> <span class="o">=</span> <span class="n">parse_program</span><span class="p">()</span><span class="o">.</span><span class="n">body</span>
    <span class="k">for</span> <span class="n">statement</span> <span class="ow">in</span> <span class="n">body</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">statement</span><span class="o">.</span><span class="n">ast_name</span> <span class="o">==</span> <span class="s2">&quot;Expr&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">statement</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">ast_name</span> <span class="o">==</span> <span class="s2">&quot;Str&quot;</span><span class="p">:</span>
                <span class="n">contents</span> <span class="o">=</span> <span class="n">statement</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">s</span>
                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">contents</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;records:&quot;</span><span class="p">):</span>
                        <span class="n">give_partial</span><span class="p">(</span><span class="n">FUNCTION_VALUE</span><span class="p">)</span>
                        <span class="k">return</span> <span class="kc">True</span>
    <span class="n">explain</span><span class="p">(</span><span class="s2">&quot;You have not created a Records definition at the top level.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">False</span>

<span class="nd">@phase</span><span class="p">(</span><span class="s2">&quot;render_introduction&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">grade_render_introduction</span><span class="p">():</span>
    <span class="n">assertGenerally</span><span class="p">(</span><span class="n">match_signature</span><span class="p">(</span><span class="s1">&#39;render_introduction&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">assertHasFunction</span><span class="p">(</span><span class="n">student</span><span class="p">,</span> <span class="s1">&#39;render_introduction&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[],</span> <span class="n">returns</span><span class="o">=</span><span class="s1">&#39;str&#39;</span><span class="p">)</span>
    <span class="n">introduction</span> <span class="o">=</span> <span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;render_introduction&#39;</span><span class="p">)</span>
    <span class="n">assertIsInstance</span><span class="p">(</span><span class="n">introduction</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">give_partial</span><span class="p">(</span><span class="n">FUNCTION_VALUE</span><span class="p">)</span>

<span class="nd">@phase</span><span class="p">(</span><span class="s2">&quot;create_world&quot;</span><span class="p">,</span> <span class="n">before</span><span class="o">=</span><span class="s1">&#39;create_world_components&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">grade_create_world</span><span class="p">():</span>
    <span class="n">assertGenerally</span><span class="p">(</span><span class="n">match_signature</span><span class="p">(</span><span class="s1">&#39;create_world&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">assertHasFunction</span><span class="p">(</span><span class="n">student</span><span class="p">,</span> <span class="s1">&#39;create_world&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[],</span> <span class="n">returns</span><span class="o">=</span><span class="s1">&#39;World&#39;</span><span class="p">)</span>
    <span class="n">initial_world</span> <span class="o">=</span> <span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;create_world&#39;</span><span class="p">)</span>
    <span class="n">assertIsInstance</span><span class="p">(</span><span class="n">initial_world</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>

<span class="nd">@phase</span><span class="p">(</span><span class="s2">&quot;create_world_components&quot;</span><span class="p">,</span> <span class="n">after</span><span class="o">=</span><span class="s2">&quot;create_world&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">grade_create_world_status</span><span class="p">():</span>
    <span class="n">initial_world</span> <span class="o">=</span> <span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;create_world&#39;</span><span class="p">)</span>
    <span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="n">initial_world</span><span class="p">)</span>
    <span class="n">assertEqual</span><span class="p">(</span><span class="n">initial_world</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">],</span> <span class="s1">&#39;playing&#39;</span><span class="p">)</span>

<span class="nd">@phase</span><span class="p">(</span><span class="s2">&quot;create_world_components&quot;</span><span class="p">,</span> <span class="n">after</span><span class="o">=</span><span class="s2">&quot;create_world&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">grade_create_world_map</span><span class="p">():</span>
    <span class="n">initial_world</span> <span class="o">=</span> <span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;create_world&#39;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;world&#39;</span><span class="p">)</span>
    <span class="c1"># Map</span>
    <span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="n">initial_world</span><span class="p">)</span>
    <span class="n">assertIsInstance</span><span class="p">(</span><span class="n">initial_world</span><span class="p">[</span><span class="s1">&#39;map&#39;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">initial_world</span><span class="p">[</span><span class="s1">&#39;map&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">assertGreaterEqual</span><span class="p">(</span><span class="n">initial_world</span><span class="p">[</span><span class="s1">&#39;map&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">,</span>
                  <span class="n">message</span><span class="o">=</span><span class="s2">&quot;I expected there to be more than one location in your world.&quot;</span><span class="p">)</span>
    <span class="c1"># Confirm locations</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">initial_world</span><span class="p">[</span><span class="s1">&#39;map&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">assertIsInstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="n">assertIsInstance</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="c1"># Neighbors</span>
        <span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;neighbors&#39;</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span>
        <span class="n">assertIsInstance</span><span class="p">(</span><span class="n">location</span><span class="p">[</span><span class="s1">&#39;neighbors&#39;</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span>
        <span class="c1"># About</span>
        <span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;about&#39;</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span>
        <span class="n">assertIsInstance</span><span class="p">(</span><span class="n">location</span><span class="p">[</span><span class="s1">&#39;about&#39;</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span>
        <span class="c1"># Stuff</span>
        <span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;stuff&#39;</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span>
        <span class="n">assertIsInstance</span><span class="p">(</span><span class="n">location</span><span class="p">[</span><span class="s1">&#39;stuff&#39;</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span>

<span class="nd">@phase</span><span class="p">(</span><span class="s2">&quot;create_world_components&quot;</span><span class="p">,</span> <span class="n">after</span><span class="o">=</span><span class="s2">&quot;create_world&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">grade_create_world_player</span><span class="p">():</span>
    <span class="n">initial_world</span> <span class="o">=</span> <span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;create_world&#39;</span><span class="p">)</span>
    <span class="c1"># Player</span>
    <span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;player&#39;</span><span class="p">,</span> <span class="n">initial_world</span><span class="p">)</span>
    <span class="n">assertIsInstance</span><span class="p">(</span><span class="n">initial_world</span><span class="p">[</span><span class="s1">&#39;player&#39;</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span>
    <span class="c1"># Location</span>
    <span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="n">initial_world</span><span class="p">[</span><span class="s1">&#39;player&#39;</span><span class="p">])</span>
    <span class="n">assertIsInstance</span><span class="p">(</span><span class="n">initial_world</span><span class="p">[</span><span class="s1">&#39;player&#39;</span><span class="p">][</span><span class="s1">&#39;location&#39;</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span>
    <span class="c1"># Inventory</span>
    <span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="n">initial_world</span><span class="p">[</span><span class="s1">&#39;player&#39;</span><span class="p">])</span>
    <span class="n">assertIsInstance</span><span class="p">(</span><span class="n">initial_world</span><span class="p">[</span><span class="s1">&#39;player&#39;</span><span class="p">][</span><span class="s1">&#39;inventory&#39;</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span>

<span class="nd">@phase</span><span class="p">(</span><span class="s2">&quot;create_world_done&quot;</span><span class="p">,</span> <span class="n">after</span><span class="o">=</span><span class="s1">&#39;create_world_components&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">grade_create_world_finished</span><span class="p">():</span>
    <span class="n">give_partial</span><span class="p">(</span><span class="n">FUNCTION_VALUE</span><span class="p">)</span>

<span class="nd">@phase</span><span class="p">(</span><span class="s2">&quot;render&quot;</span><span class="p">,</span> <span class="n">after</span><span class="o">=</span><span class="s1">&#39;create_world_done&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">grade_render</span><span class="p">():</span>
    <span class="n">assertGenerally</span><span class="p">(</span><span class="n">match_signature</span><span class="p">(</span><span class="s1">&#39;render&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">assertHasFunction</span><span class="p">(</span><span class="n">student</span><span class="p">,</span> <span class="s1">&#39;render&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;World&#39;</span><span class="p">],</span> <span class="n">returns</span><span class="o">=</span><span class="s1">&#39;str&#39;</span><span class="p">)</span>
    <span class="n">initial_world</span> <span class="o">=</span> <span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;create_world&#39;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;world&#39;</span><span class="p">)</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;render&#39;</span><span class="p">,</span> <span class="n">initial_world</span><span class="p">,</span> <span class="n">keep_context</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">target</span><span class="o">=</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="s1">&#39;message = render(world)&#39;</span><span class="p">)</span>
    <span class="n">assertIsInstance</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">give_partial</span><span class="p">(</span><span class="n">FUNCTION_VALUE</span><span class="p">)</span>

<span class="nd">@phase</span><span class="p">(</span><span class="s2">&quot;get_options&quot;</span><span class="p">,</span> <span class="n">after</span><span class="o">=</span><span class="s1">&#39;create_world_done&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">grade_get_options</span><span class="p">():</span>
    <span class="n">assertGenerally</span><span class="p">(</span><span class="n">match_signature</span><span class="p">(</span><span class="s1">&#39;get_options&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">assertHasFunction</span><span class="p">(</span><span class="n">student</span><span class="p">,</span> <span class="s1">&#39;get_options&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;World&#39;</span><span class="p">],</span> <span class="n">returns</span><span class="o">=</span><span class="s1">&#39;list[str]&#39;</span><span class="p">)</span>
    <span class="n">initial_world</span> <span class="o">=</span> <span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;create_world&#39;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;world&#39;</span><span class="p">)</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;get_options&#39;</span><span class="p">,</span> <span class="n">initial_world</span><span class="p">,</span> <span class="n">keep_context</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">target</span><span class="o">=</span><span class="s1">&#39;options&#39;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="s1">&#39;options = get_options(world)&#39;</span><span class="p">)</span>
    <span class="n">assertIsInstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
    <span class="n">assertGreater</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
                  <span class="n">message</span><span class="o">=</span><span class="s2">&quot;I expected there to be more than one option.&quot;</span><span class="p">)</span>
    <span class="n">assertIsInstance</span><span class="p">(</span><span class="n">options</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;Quit&#39;</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
    <span class="n">give_partial</span><span class="p">(</span><span class="n">FUNCTION_VALUE</span><span class="p">)</span>

<span class="nd">@phase</span><span class="p">(</span><span class="s2">&quot;choose&quot;</span><span class="p">,</span> <span class="n">after</span><span class="o">=</span><span class="s1">&#39;get_options&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">grade_choose</span><span class="p">():</span>
    <span class="n">assertGenerally</span><span class="p">(</span><span class="n">match_signature</span><span class="p">(</span><span class="s1">&#39;choose&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">assertHasFunction</span><span class="p">(</span><span class="n">student</span><span class="p">,</span> <span class="s1">&#39;choose&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;list[str]&#39;</span><span class="p">],</span> <span class="n">returns</span><span class="o">=</span><span class="s1">&#39;str&#39;</span><span class="p">)</span>
    <span class="n">assertEqual</span><span class="p">(</span><span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;choose&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Quit&#39;</span><span class="p">,</span> <span class="s1">&#39;Run&#39;</span><span class="p">,</span> <span class="s1">&#39;Fight&#39;</span><span class="p">],</span>
                             <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Walk&#39;</span><span class="p">,</span> <span class="s1">&#39;Skip&#39;</span><span class="p">,</span> <span class="s1">&#39;Fight&#39;</span><span class="p">]),</span>
                <span class="s1">&#39;Fight&#39;</span><span class="p">)</span>
    <span class="n">assertEqual</span><span class="p">(</span><span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;choose&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Quit&#39;</span><span class="p">,</span> <span class="s1">&#39;Run&#39;</span><span class="p">,</span> <span class="s1">&#39;Fight&#39;</span><span class="p">],</span>
                             <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Quit&#39;</span><span class="p">]),</span>
                <span class="s1">&#39;Quit&#39;</span><span class="p">)</span>
    <span class="n">assertEqual</span><span class="p">(</span><span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;choose&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Open&#39;</span><span class="p">,</span> <span class="s1">&#39;Close&#39;</span><span class="p">,</span> <span class="s1">&#39;Sleep&#39;</span><span class="p">],</span>
                             <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Walk&#39;</span><span class="p">,</span> <span class="s1">&#39;Walk&#39;</span><span class="p">,</span> <span class="s1">&#39;Sleep&#39;</span><span class="p">]),</span>
                <span class="s1">&#39;Sleep&#39;</span><span class="p">)</span>
    <span class="n">give_partial</span><span class="p">(</span><span class="n">FUNCTION_VALUE</span><span class="p">)</span>

<span class="nd">@phase</span><span class="p">(</span><span class="s2">&quot;update&quot;</span><span class="p">,</span> <span class="n">after</span><span class="o">=</span><span class="s1">&#39;get_options&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">grade_update</span><span class="p">():</span>
    <span class="n">assertGenerally</span><span class="p">(</span><span class="n">match_signature</span><span class="p">(</span><span class="s1">&#39;update&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
    <span class="n">assertHasFunction</span><span class="p">(</span><span class="n">student</span><span class="p">,</span> <span class="s1">&#39;update&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;World&#39;</span><span class="p">,</span> <span class="s1">&#39;str&#39;</span><span class="p">],</span> <span class="n">returns</span><span class="o">=</span><span class="s1">&#39;str&#39;</span><span class="p">)</span>
    <span class="n">initial_world</span> <span class="o">=</span> <span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;create_world&#39;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;world&#39;</span><span class="p">)</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;get_options&#39;</span><span class="p">,</span> <span class="n">initial_world</span><span class="p">,</span> <span class="n">keep_context</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">target</span><span class="o">=</span><span class="s1">&#39;options&#39;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="s1">&#39;options = get_options(world)&#39;</span><span class="p">)</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;update&#39;</span><span class="p">,</span> <span class="n">initial_world</span><span class="p">,</span> <span class="n">options</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">keep_context</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">target</span><span class="o">=</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="s1">&#39;message = update(world, options[0])&#39;</span><span class="p">)</span>
    <span class="n">assertIsInstance</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">give_partial</span><span class="p">(</span><span class="n">FUNCTION_VALUE</span><span class="p">)</span>

<span class="nd">@phase</span><span class="p">(</span><span class="s2">&quot;render_ending&quot;</span><span class="p">,</span> <span class="n">after</span><span class="o">=</span><span class="s1">&#39;update&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">grade_render_ending</span><span class="p">():</span>
    <span class="n">assertGenerally</span><span class="p">(</span><span class="n">match_signature</span><span class="p">(</span><span class="s1">&#39;render_ending&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">assertHasFunction</span><span class="p">(</span><span class="n">student</span><span class="p">,</span> <span class="s1">&#39;render_ending&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;World&#39;</span><span class="p">],</span> <span class="n">returns</span><span class="o">=</span><span class="s1">&#39;str&#39;</span><span class="p">)</span>
    <span class="n">initial_world</span> <span class="o">=</span> <span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;create_world&#39;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;world&#39;</span><span class="p">)</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;update&#39;</span><span class="p">,</span> <span class="n">initial_world</span><span class="p">,</span> <span class="s1">&#39;Quit&#39;</span><span class="p">,</span> <span class="n">keep_context</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">target</span><span class="o">=</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="s1">&#39;message = update(world, &quot;Quit&quot;)&#39;</span><span class="p">)</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;render_ending&#39;</span><span class="p">,</span> <span class="n">initial_world</span><span class="p">,</span> <span class="n">keep_context</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">target</span><span class="o">=</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="s1">&#39;message = render_ending(world)&#39;</span><span class="p">)</span>
    <span class="n">assertIsInstance</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">give_partial</span><span class="p">(</span><span class="n">FUNCTION_VALUE</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test_path</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">outcome</span><span class="p">,</span> <span class="n">path_name</span><span class="p">):</span>
    <span class="n">world</span> <span class="o">=</span> <span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;create_world&#39;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;world&#39;</span><span class="p">,</span> <span class="n">keep_context</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">command</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>
        <span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="n">world</span><span class="p">)</span>
        <span class="n">assertEqual</span><span class="p">(</span><span class="n">world</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">],</span> <span class="s1">&#39;playing&#39;</span><span class="p">)</span>
        <span class="n">assertIsInstance</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;render&#39;</span><span class="p">,</span> <span class="n">world</span><span class="p">,</span> <span class="n">keep_context</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">target</span><span class="o">=</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="s1">&#39;message = render(world)&#39;</span><span class="p">)</span>
        <span class="n">assertIsInstance</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="n">options</span> <span class="o">=</span> <span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;get_options&#39;</span><span class="p">,</span> <span class="n">world</span><span class="p">,</span> <span class="n">keep_context</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">target</span><span class="o">=</span><span class="s1">&#39;options&#39;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="s1">&#39;options = get_options(world)&#39;</span><span class="p">)</span>
        <span class="n">assertIsInstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
        <span class="n">assertIn</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;update&#39;</span><span class="p">,</span> <span class="n">world</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="n">keep_context</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">target</span><span class="o">=</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="s1">&#39;message = update(world, </span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">command</span><span class="p">))</span>
        <span class="n">assertIsInstance</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">assertEqual</span><span class="p">(</span><span class="n">world</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">outcome</span><span class="p">,</span>
        <span class="n">message</span><span class="o">=</span><span class="s2">&quot;I tried your </span><span class="si">{path_name}</span><span class="s2"> path, but your world&#39;s status ended as &#39;</span><span class="si">{outcome}</span><span class="s2">&#39; instead of &#39;</span><span class="si">{expected}</span><span class="s2">&#39;.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">path_name</span><span class="o">=</span><span class="n">path_name</span><span class="p">,</span> <span class="n">outcome</span><span class="o">=</span><span class="n">world</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">expected</span><span class="o">=</span><span class="n">outcome</span><span class="p">))</span>

<span class="nd">@phase</span><span class="p">(</span><span class="s2">&quot;win_and_lose_paths&quot;</span><span class="p">,</span> <span class="n">after</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;create_world&#39;</span><span class="p">,</span> <span class="s1">&#39;get_options&#39;</span><span class="p">,</span>
                                    <span class="s1">&#39;render&#39;</span><span class="p">,</span> <span class="s1">&#39;choose&#39;</span><span class="p">,</span> <span class="s1">&#39;update&#39;</span><span class="p">,</span>
                                    <span class="s1">&#39;render_ending&#39;</span><span class="p">,</span> <span class="s1">&#39;render_introduction&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">grade_win_and_lose_paths</span><span class="p">():</span>
    <span class="n">assertHas</span><span class="p">(</span><span class="n">student</span><span class="p">,</span> <span class="s2">&quot;WIN_PATH&quot;</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">assertHas</span><span class="p">(</span><span class="n">student</span><span class="p">,</span> <span class="s2">&quot;LOSE_PATH&quot;</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;render_introduction&#39;</span><span class="p">)</span>
    <span class="n">student</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;# I am going to try your WIN_PATH&quot;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">test_path</span><span class="p">(</span><span class="n">student</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;WIN_PATH&#39;</span><span class="p">],</span> <span class="s1">&#39;won&#39;</span><span class="p">,</span> <span class="s1">&#39;WIN_PATH&#39;</span><span class="p">)</span>
    <span class="n">student</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;render_introduction&#39;</span><span class="p">)</span>
    <span class="n">student</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;# I am going to try your LOSE_PATH&quot;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">test_path</span><span class="p">(</span><span class="n">student</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;LOSE_PATH&#39;</span><span class="p">],</span> <span class="s1">&#39;lost&#39;</span><span class="p">,</span> <span class="s1">&#39;LOSE_PATH&#39;</span><span class="p">)</span>
    <span class="n">compliment</span><span class="p">(</span><span class="s2">&quot;I was able to play your game!&quot;</span><span class="p">)</span>
    <span class="n">give_partial</span><span class="p">(</span><span class="n">FUNCTION_VALUE</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>


<span class="nd">@phase</span><span class="p">(</span><span class="s1">&#39;conclusion&#39;</span><span class="p">,</span> <span class="n">after</span><span class="o">=</span><span class="s1">&#39;win_and_lose_paths&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">finish_grading</span><span class="p">():</span>
    <span class="c1"># 2</span>
    <span class="n">assertGenerally</span><span class="p">(</span><span class="n">all_documented</span><span class="p">(),</span> <span class="n">score</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="k">if</span> <span class="n">sanity</span><span class="p">:</span>
    <span class="n">resolve_all</span><span class="p">(</span><span class="n">set_successful</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">resolver</span><span class="p">()</span>
</pre></div>
</div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="quickstart.html" class="btn btn-neutral float-left" title="Teacher Quick Start Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="reference.html" class="btn btn-neutral float-right" title="Teacher Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, acbart, lukesg08.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>